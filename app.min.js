var http=require("http"),fs=require("fs"),im=require("./imagemagick"),qs=require("querystring");http.createServer(function(c,b){if(c.method=="POST"){var a="";
c.on("data",function(d){a+=d;});c.on("end",function(){var k=qs.parse(a),d=["amarilla.png","aqua.png","morada.png","roja.png"],h=["ema/","ciclista/"],f=d[k.cc],i=h[k.cu],j="type/"+i+f,g='label:"'+k.tx+'"',e="created/"+new Buffer(f+i+g).toString("base64");
b.writeHead(200,{"Content-Type":"application/json"});im.convert([j,"(","-gravity","center","-pointsize","40","-background","transparent","-font","font.ttf","-fill","#dd61d0","-pointsize","40",g,"-virtual-pixel","transparent","-distort","Arc","30","-geometry","+50-50",")","-composite",e],function(m,l){if(m){throw m;
}console.log("out:",e);b.write(e);});b.end();});}if(c){b.end();}}).listen(3000);